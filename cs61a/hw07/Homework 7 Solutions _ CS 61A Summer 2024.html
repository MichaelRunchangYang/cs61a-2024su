<!DOCTYPE html>
<!-- saved from url=(0030)https://cs61a.org/hw/sol-hw07/ -->
<html lang="en" class="trancy-zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="description" content="CS 61A: Structure and Interpretation of Computer Programs">
    <meta name="keywords" content="CS 61A, Computer Science, CS, 61A, Programming, John DeNero, Berkeley, EECS">
    <meta name="author" content="Laryn Qi, Charlotte Le, Raymond Tan">
    
    <meta name="viewport" content="width=device-width">

    <script src="./Homework 7 Solutions _ CS 61A Summer 2024_files/jquery.min.js.下载"></script>
    <script src="./Homework 7 Solutions _ CS 61A Summer 2024_files/jquery.ba-throttle-debounce.min.js.下载"></script>
    <script src="./Homework 7 Solutions _ CS 61A Summer 2024_files/bootstrap.min.js.下载"></script>
    <script src="./Homework 7 Solutions _ CS 61A Summer 2024_files/hl.js.下载"></script>
    <script src="./Homework 7 Solutions _ CS 61A Summer 2024_files/toggledarkmode.js.下载"></script>
    <script>
        // we aren't registering builtins since
        //      (1) they don't render differently in the current CSS from other names
        //      (2) it's a mess to list all of them. You can extract from the site but that takes effort
        // if (1) ceases to be true, (2) might be worth the effort. For now, we're leaving as is
        hljsRegister({
            'keyword': "define if cond and or let begin lambda mu quote delay cons-stream set! quasiquote unquote unquote-splicing define-macro"
        });
        hljs.initHighlightingOnLoad();
    </script>
    <script src="./Homework 7 Solutions _ CS 61A Summer 2024_files/dark-mode.js.下载"></script>
    <link rel="stylesheet" href="./Homework 7 Solutions _ CS 61A Summer 2024_files/bootstrap.min.css">
    <link rel="stylesheet" href="./Homework 7 Solutions _ CS 61A Summer 2024_files/css">
    <link rel="stylesheet" href="./Homework 7 Solutions _ CS 61A Summer 2024_files/style.css">
    <link rel="stylesheet" href="./Homework 7 Solutions _ CS 61A Summer 2024_files/mono-blue.css">
    <link rel="icon" href="https://cs61a.org/assets/images/favicon.ico">

    

<link rel="stylesheet" type="text/css" href="./Homework 7 Solutions _ CS 61A Summer 2024_files/hw.css">


    <title>
Homework 7 Solutions | CS 61A Summer 2024
</title>
  </head>

  <body id="index" class="home">
    <nav class="navbar navbar-default navbar-static-top">
      <div class="container noselect">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-section">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="https://cs61a.org/">
            <img style="max-width:60px; margin-top: -20px;" class="logo" src="./Homework 7 Solutions _ CS 61A Summer 2024_files/logo.png">
          </a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse-section">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="https://cs61a.org/office-hours">Weekly Schedule</a></li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="https://cs61a.org/hw/sol-hw07/#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                External Websites
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="https://oh.cs61a.org/">Office Hours Queue</a></li>
                <li><a href="https://pythontutor.com/cp/composingprograms.html">Python Tutor</a></li>
                <li><a href="https://code.cs61a.org/">Online Code Editor</a></li>
                <li><a href="https://www.composingprograms.com/">Textbook</a></li>
                <li><a href="https://edstem.org/us/courses/59836/discussion/">Ed</a></li>
                <li><a href="https://sections.cs61a.org/">Sections Tool</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="https://cs61a.org/hw/sol-hw07/#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Forms
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="https://go.cs61a.org/extensions">Request an Extension</a></li>
                <li><a href="https://go.cs61a.org/regrades">Request a Regrade</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="https://cs61a.org/hw/sol-hw07/#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="https://go.cs61a.org/debugging-guide">Debugging Guide</a></li>
                <li><a href="https://cs61a.org/articles/studying">Studying Guide</a></li>
                <li><a href="https://cs61a.org/articles/composition">Composition Guide</a></li>
                <li><a href="https://cs61a.org/articles/pair-programming">Pair Programming Guide</a></li>
                <li><a href="https://cs61a.org/resources/">Past Exams &amp; Websites</a></li>
                <li><a href="https://cs61a.org/articles/campus-res/">Department and Campus</a></li>
                <li><a href="https://cs61a.org/articles/advice/">Advice from Former Students</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="https://cs61a.org/hw/sol-hw07/#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Staff
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="https://cs61a.org/instructor">Instructors</a></li>
                <li><a href="https://cs61a.org/staff">TAs &amp; Tutors</a></li>
                <li><a href="https://cs61a.org/contact/">Contact</a></li>
              </ul>
            </li>
            <li><a href="https://cs61a.org/articles/about">Syllabus</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <main id="content" class="container">
      
<div class="row">
  <div class="col-md-9">
    <header>
      <h1>
        
Homework 7 Solutions

        
        
        <ul class="inline-block list-inline">
          <li><a href="https://cs61a.org/hw/sol-hw07/hw07.zip" class="label label-outline">hw07.zip</a></li>
        </ul>
        
        
      </h1>
    </header>
    
<h2>Solution Files</h2>
<p>You can find the solutions in <a href="https://cs61a.org/hw/sol-hw07/hw07.sql">hw07.sql</a>.</p>

    
<br>

<p>To check your progress, you can run <code>sqlite3</code> directly by running:</p>

<pre><code class="hljs sql">python3 sqlite_shell.py <span class="hljs-comment">--init hw07.sql</span></code></pre>

<p>You should also check your work using <code>ok</code>:</p>

<pre><code class="hljs">python3 ok</code></pre>

<br>


<h1 id="required-questions">Required Questions</h1>


<br>

        <button id="toggle-1" class="btn btn-outline btn-lg alwaystoggle toggle">
        Getting Started Videos<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-1">


<h2 id="getting-started-videos" class="no-toc">Getting Started Videos</h2>


<p xt-marked="ok">These videos may provide some helpful direction for <xt-mark w="tackle" style="color: #ff8861 !important">tackling</xt-mark> the coding
problems on this assignment.</p>

<blockquote><p>To see these videos, you should be logged into your berkeley.edu email.</p></blockquote>


            <iframe width="560" height="315" src="./Homework 7 Solutions _ CS 61A Summer 2024_files/videoseries.html" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><p><a href="https://youtu.be/playlist?list=PLx38hZJ5RLZfWIxwPQ44S0eHnLo36tSZK"> YouTube link </a></p>
</div>

<!-- Spring 2024 Questions -->

<!-- <include topics/scheme/easy/pow/pow.md> -->
<!-- <include topics/scheme/medium/repeatedly-cube.md> -->
<!-- <include topics/scheme/easy/cadr-caddr/cadr-caddr.md> -->


<h2 id="sql">SQL</h2>



<h3 id="dog-data">Dog Data</h3>


<p>In each question below, you will define a new table based on the following
tables.</p>

<pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> parents <span class="hljs-keyword">AS</span>
  <span class="hljs-keyword">SELECT</span> <span class="hljs-string">"abraham"</span> <span class="hljs-keyword">AS</span> <span class="hljs-keyword">parent</span>, <span class="hljs-string">"barack"</span> <span class="hljs-keyword">AS</span> <span class="hljs-keyword">child</span> <span class="hljs-keyword">UNION</span>
  <span class="hljs-keyword">SELECT</span> <span class="hljs-string">"abraham"</span>          , <span class="hljs-string">"clinton"</span>         <span class="hljs-keyword">UNION</span>
  <span class="hljs-keyword">SELECT</span> <span class="hljs-string">"delano"</span>           , <span class="hljs-string">"herbert"</span>         <span class="hljs-keyword">UNION</span>
  <span class="hljs-keyword">SELECT</span> <span class="hljs-string">"fillmore"</span>         , <span class="hljs-string">"abraham"</span>         <span class="hljs-keyword">UNION</span>
  <span class="hljs-keyword">SELECT</span> <span class="hljs-string">"fillmore"</span>         , <span class="hljs-string">"delano"</span>          <span class="hljs-keyword">UNION</span>
  <span class="hljs-keyword">SELECT</span> <span class="hljs-string">"fillmore"</span>         , <span class="hljs-string">"grover"</span>          <span class="hljs-keyword">UNION</span>
  <span class="hljs-keyword">SELECT</span> <span class="hljs-string">"eisenhower"</span>       , <span class="hljs-string">"fillmore"</span>;

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> dogs <span class="hljs-keyword">AS</span>
  <span class="hljs-keyword">SELECT</span> <span class="hljs-string">"abraham"</span> <span class="hljs-keyword">AS</span> <span class="hljs-keyword">name</span>, <span class="hljs-string">"long"</span> <span class="hljs-keyword">AS</span> fur, <span class="hljs-number">26</span> <span class="hljs-keyword">AS</span> height <span class="hljs-keyword">UNION</span>
  <span class="hljs-keyword">SELECT</span> <span class="hljs-string">"barack"</span>         , <span class="hljs-string">"short"</span>      , <span class="hljs-number">52</span>           <span class="hljs-keyword">UNION</span>
  <span class="hljs-keyword">SELECT</span> <span class="hljs-string">"clinton"</span>        , <span class="hljs-string">"long"</span>       , <span class="hljs-number">47</span>           <span class="hljs-keyword">UNION</span>
  <span class="hljs-keyword">SELECT</span> <span class="hljs-string">"delano"</span>         , <span class="hljs-string">"long"</span>       , <span class="hljs-number">46</span>           <span class="hljs-keyword">UNION</span>
  <span class="hljs-keyword">SELECT</span> <span class="hljs-string">"eisenhower"</span>     , <span class="hljs-string">"short"</span>      , <span class="hljs-number">35</span>           <span class="hljs-keyword">UNION</span>
  <span class="hljs-keyword">SELECT</span> <span class="hljs-string">"fillmore"</span>       , <span class="hljs-string">"curly"</span>      , <span class="hljs-number">32</span>           <span class="hljs-keyword">UNION</span>
  <span class="hljs-keyword">SELECT</span> <span class="hljs-string">"grover"</span>         , <span class="hljs-string">"short"</span>      , <span class="hljs-number">28</span>           <span class="hljs-keyword">UNION</span>
  <span class="hljs-keyword">SELECT</span> <span class="hljs-string">"herbert"</span>        , <span class="hljs-string">"curly"</span>      , <span class="hljs-number">31</span>;

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">sizes</span> <span class="hljs-keyword">AS</span>
  <span class="hljs-keyword">SELECT</span> <span class="hljs-string">"toy"</span> <span class="hljs-keyword">AS</span> <span class="hljs-keyword">size</span>, <span class="hljs-number">24</span> <span class="hljs-keyword">AS</span> <span class="hljs-keyword">min</span>, <span class="hljs-number">28</span> <span class="hljs-keyword">AS</span> <span class="hljs-keyword">max</span> <span class="hljs-keyword">UNION</span>
  <span class="hljs-keyword">SELECT</span> <span class="hljs-string">"mini"</span>       , <span class="hljs-number">28</span>       , <span class="hljs-number">35</span>        <span class="hljs-keyword">UNION</span>
  <span class="hljs-keyword">SELECT</span> <span class="hljs-string">"medium"</span>     , <span class="hljs-number">35</span>       , <span class="hljs-number">45</span>        <span class="hljs-keyword">UNION</span>
  <span class="hljs-keyword">SELECT</span> <span class="hljs-string">"standard"</span>   , <span class="hljs-number">45</span>       , <span class="hljs-number">60</span>;</code></pre>

<p>Your tables should still perform correctly even if the values in these tables
change. For example, if you are asked to list all dogs with a name that starts
with h, you should write:</p>

<pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">name</span> <span class="hljs-keyword">FROM</span> dogs <span class="hljs-keyword">WHERE</span> <span class="hljs-string">"h"</span> &lt;= <span class="hljs-keyword">name</span> <span class="hljs-keyword">AND</span> <span class="hljs-keyword">name</span> &lt; <span class="hljs-string">"i"</span>;</code></pre>

<p>Instead of assuming that the <code>dogs</code> table has only the data above and writing</p>

<pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-string">"herbert"</span>;</code></pre>

<p>The former query would still be correct if the name <code>grover</code> were changed to
<code>hoover</code> or a row was added with the name <code>harry</code>.</p>


<h3 id="q1-by-parent-height">Q1: By Parent Height</h3>

<p>Create a table <code>by_parent_height</code> that has a column of the names of all dogs that have
a <code>parent</code>, ordered by the height of the parent dog from tallest parent to shortest
parent.</p>

<pre><code class="hljs sql"><span class="hljs-comment">-- All dogs with parents ordered by decreasing height of their parent</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> by_parent_height <span class="hljs-keyword">AS</span>
<div class="sol-highlight">  <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">child</span> <span class="hljs-keyword">FROM</span> parents, dogs <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">name</span> = <span class="hljs-keyword">parent</span> <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> height <span class="hljs-keyword">desc</span>;</div></code></pre>

<p>For example, <code>fillmore</code> has a parent <code>eisenhower</code> with height 35, and so
should appear before <code>grover</code> who has a parent <code>fillmore</code> with height 32.
The names of dogs with parents of the same height should appear together in any
order. For example, <code>barack</code> and <code>clinton</code> should both appear at the end, but
either one can come before the other.</p>

<pre><code class="hljs">sqlite&gt; SELECT * FROM by_parent_height;
herbert
fillmore
abraham
delano
grover
barack
clinton</code></pre>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q by_parent_height</code><button id="copy-code-python3ok-qby_parent_height" class="inline-copy-button"><code class="nohighlight"><div class="copy-tooltip"><span>Copy</span></div>✂️</code></button></pre>
        <script>
        document.getElementById("copy-code-python3ok-qby_parent_height").onclick = () => copyCode('python3 ok -q by_parent_height', "copy-code-python3ok-qby_parent_height");
        </script>
        <br>
<!--
            <iframe width="560" height="315" src="https://youtube.com/embed/wRRI2tn4zdo"
                frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen></iframe><p><a href='https://youtu.be/wRRI2tn4zdo'> YouTube link </a></p>-->

<div class="sol-highlight">

<p>We need information from both the <code>parents</code> and the <code>dogs</code> table. This time, the
only rows that make sense are the ones where a child is matched up with their
parent. Finally, we order the result by descending height.</p>

</div>


<h3 id="q2-size-of-dogs">Q2: Size of Dogs</h3>

<p>The Fédération Cynologique Internationale classifies a standard poodle as over
45 cm and up to 60 cm. The <code>sizes</code> table describes this and other such
classifications, where a dog must be over the <code>min</code> and less than or equal to
the <code>max</code> in <code>height</code> to qualify as <code>size</code>.</p>

<p>Create a <code>size_of_dogs</code> table with two columns, one for each dog's <code>name</code> and
another for its <code>size</code>.</p>

<pre><code class="hljs sql"><span class="hljs-comment">-- The size of each dog</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> size_of_dogs <span class="hljs-keyword">AS</span>
<div class="sol-highlight">  <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">name</span>, <span class="hljs-keyword">size</span> <span class="hljs-keyword">FROM</span> dogs, <span class="hljs-keyword">sizes</span>
    <span class="hljs-keyword">WHERE</span> height &gt; <span class="hljs-keyword">min</span> <span class="hljs-keyword">AND</span> height &lt;= <span class="hljs-keyword">max</span>;</div></code></pre>

<p>The output should look like the following:</p>

<pre><code class="hljs">sqlite&gt; SELECT * FROM size_of_dogs;
abraham|toy
barack|standard
clinton|standard
delano|standard
eisenhower|mini
fillmore|mini
grover|toy
herbert|mini</code></pre>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q size_of_dogs</code><button id="copy-code-python3ok-qsize_of_dogs" class="inline-copy-button"><code class="nohighlight"><div class="copy-tooltip"><span>Copy</span></div>✂️</code></button></pre>
        <script>
        document.getElementById("copy-code-python3ok-qsize_of_dogs").onclick = () => copyCode('python3 ok -q size_of_dogs', "copy-code-python3ok-qsize_of_dogs");
        </script>
        <br>

<!--
            <iframe width="560" height="315" src="https://youtube.com/embed/d9EPid-MJes"
                frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen></iframe><p><a href='https://youtu.be/d9EPid-MJes'> YouTube link </a></p>-->

<div class="sol-highlight">

<p>We know that at a minimum, we need information from both the <code>dogs</code> and <code>sizes</code>
table. Finally, we filter and keep only the rows that make sense: a size that
corresponds to the size of the dog we're currently considering.</p>

</div>


<h3 id="q3-sentences">Q3: Sentences</h3>

<p>There are two pairs of siblings that have the same size. Create a table that
contains a row with a string for each of these pairs.  Each string should be a
sentence describing the siblings by their size.</p>

<pre><code class="hljs sql"><span class="hljs-comment">-- Filling out this helper table is optional</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">siblings</span> <span class="hljs-keyword">AS</span>
<div class="sol-highlight">  <span class="hljs-keyword">SELECT</span> a.child <span class="hljs-keyword">AS</span> <span class="hljs-keyword">first</span>, b.child <span class="hljs-keyword">AS</span> <span class="hljs-keyword">second</span> <span class="hljs-keyword">FROM</span> parents <span class="hljs-keyword">AS</span> a, parents <span class="hljs-keyword">AS</span> b
    <span class="hljs-keyword">WHERE</span> a.parent = b.parent <span class="hljs-keyword">AND</span> a.child &lt; b.child;</div>
<span class="hljs-comment">-- Sentences about siblings that are the same size</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> sentences <span class="hljs-keyword">AS</span>
<div class="sol-highlight">  <span class="hljs-keyword">SELECT</span> <span class="hljs-string">"The two siblings, "</span> || <span class="hljs-keyword">first</span> || <span class="hljs-string">" and "</span> || <span class="hljs-keyword">second</span> || <span class="hljs-string">", have the same size: "</span> || a.size
    <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">siblings</span>, size_of_dogs <span class="hljs-keyword">AS</span> a, size_of_dogs <span class="hljs-keyword">AS</span> b
    <span class="hljs-keyword">WHERE</span> a.size = b.size <span class="hljs-keyword">AND</span> a.name = <span class="hljs-keyword">first</span> <span class="hljs-keyword">AND</span> b.name = <span class="hljs-keyword">second</span>;</div></code></pre>

<p>Each sibling pair should appear only once in the output, and siblings should be
listed in alphabetical order (e.g. <code>"barack and clinton..."</code> instead of
<code>"clinton and barack..."</code>), as follows:</p>

<pre><code class="hljs">sqlite&gt; SELECT * FROM sentences;
The two siblings, barack and clinton, have the same size: standard
The two siblings, abraham and grover, have the same size: toy</code></pre>

<blockquote><p><strong>Hint</strong>: First, create a helper table containing each pair of siblings. This
will make comparing the sizes of siblings when constructing the main table
easier.</p>

<p><strong>Hint</strong>: If you join a table with itself, use <code>AS</code> within the <code>FROM</code> clause to
give each table an alias.</p>

<p><strong>Hint</strong>: In order to concatenate two strings into one, use the <code>||</code> operator.</p></blockquote>

<!--
            <iframe width="560" height="315" src="https://youtube.com/embed/DiS4IzSohkc"
                frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen></iframe><p><a href='https://youtu.be/DiS4IzSohkc'> YouTube link </a></p>-->

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q sentences</code><button id="copy-code-python3ok-qsentences" class="inline-copy-button"><code class="nohighlight"><div class="copy-tooltip"><span>Copy</span></div>✂️</code></button></pre>
        <script>
        document.getElementById("copy-code-python3ok-qsentences").onclick = () => copyCode('python3 ok -q sentences', "copy-code-python3ok-qsentences");
        </script>
        <br>

<div class="sol-highlight">

<p>Roughly speaking, there are two tasks we need to solve here:</p>

<p><strong>Figure out which dogs are siblings</strong></p>

<p>A sibling is someone you share a parent with. This will probably involve the
<code>parents</code> table.</p>

<p>It might be tempting to join this with <code>dogs</code>, but there isn't any extra
information provided by a dogs table that we need at this time. Furthermore, we
still need information on sibling for a given dog, since the <code>parents</code> table
just associates each dog to a parent.</p>

<p>The next step, therefore, is to match all children to all other children by
joining the parents table to itself. The only rows here that make sense are the
rows that represent sibling relationships since they share the same parent.</p>

<p>Remember that we want to avoid duplicates! If dog A and B are siblings, we don't
want both A/B and B/A to appear in the final result. We also definitely don't
want A/A to be a sibling pair. Enforcing ordering on the sibling names ensures
that we don't have either issue.</p>

<p><strong>Construct sentences based on sibling information</strong></p>

<p>After determining the siblings, constructing the sentences just requires us to
get the size of each sibling. We could join on the <code>dogs</code> and <code>sizes</code> tables as
we did in an earlier problem, but there's no need to redo that work. Instead,
we'll reuse our <code>size_of_dogs</code> table to figure out the size of each sibling in
each pair.</p>

</div>


<h3 id="q4-low-variance">Q4: Low Variance</h3>


<p>We want to create a table that contains the height range (difference between maximum and minimum height) of all dogs that share a fur type. However, we'll only
consider fur types where each dog with that fur type is within 30% of the average height of all dogs with that fur type.</p>

<p>For example, if the average height for short-haired dogs is 10, then in order to be included in our
output, all dogs with short hair must have a height of at most 13 and at least 7.</p>

<p>To achieve this, we can use <code>MIN</code>, <code>MAX</code>, and <code>AVG</code>.
For this problem, we'll want to find the average height and make sure that:</p>

<ul>
  <li>There are no heights smaller than 0.7 of the average.</li>
  <li>There are no heights greater than 1.3 of the average.</li>
</ul>

<p>Your output should first include the fur type and then the height range for the fur types that meet
this criteria.</p>

<pre><code class="hljs sql"><span class="hljs-comment">-- Height range for each fur type where all of the heights differ by no more than 30% from the average height</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> low_variance <span class="hljs-keyword">AS</span>
<div class="sol-highlight">  <span class="hljs-keyword">SELECT</span> fur, <span class="hljs-keyword">MAX</span>(height) - <span class="hljs-keyword">MIN</span>(height) <span class="hljs-keyword">FROM</span> dogs <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> fur
      <span class="hljs-keyword">HAVING</span> <span class="hljs-keyword">MIN</span>(height) &gt;= <span class="hljs-number">.7</span> * <span class="hljs-keyword">AVG</span>(height) <span class="hljs-keyword">AND</span> <span class="hljs-keyword">MAX</span>(height) &lt;= <span class="hljs-number">1.3</span> * <span class="hljs-keyword">AVG</span>(height);</div>
<span class="hljs-comment">-- Example:</span>
<span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> low_variance;
<span class="hljs-comment">-- Expected output:</span>
<span class="hljs-comment">-- curly|1</span></code></pre>

<p><em>Explanation</em>: The average height of long-haired dogs is 39.7, so the low variance criterion requires the height of each long-haired dog to be between 27.8 and 51.6. However, <code>abraham</code> is a long-haired dog with height 26, which is outside this range. For short-haired dogs, <code>barack</code> falls outside the valid range (check!). Thus, neither short nor long haired dogs are included in the output. There are two curly haired dogs: <code>fillmore</code> with height 32 and <code>herbert</code> with height 31. This gives a height range of 1.</p>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q low_variance</code><button id="copy-code-python3ok-qlow_variance" class="inline-copy-button"><code class="nohighlight"><div class="copy-tooltip"><span>Copy</span></div>✂️</code></button></pre>
        <script>
        document.getElementById("copy-code-python3ok-qlow_variance").onclick = () => copyCode('python3 ok -q low_variance', "copy-code-python3ok-qlow_variance");
        </script>
        <br>


<h1 id="submit-assignment">Submit Assignment</h1>


<p>Submit this assignment by uploading any files you've edited <strong>to the appropriate Gradescope assignment.</strong> <a href="https://cs61a.org/lab/lab00/#submit-with-gradescope">Lab 00</a> has detailed instructions.</p>

<p>Make sure you're submitting <code>hw07.sql</code> to the autograder!</p>


<h2 id="extra-credit-1-pt">Extra Credit (1 pt)</h2>


<blockquote><p>During Office Hours and Project Parties, the staff will prioritize helping
students with required questions. We will not be offering help with this
question unless the <a href="https://oh.cs61a.org/">queue</a> is empty.</p></blockquote>


<h3 id="q5-add-leaf">Q5: Add Leaf</h3>


<p>Below is a Scheme-ified data abstraction of the Tree class we've
been working with this semester.</p>

<pre><code class="scheme hljs"><span class="hljs-comment">; Constructs tree given label and list of branches</span>
(<span class="hljs-name">tree</span> label branches)

<span class="hljs-comment">; Returns the label of the tree</span>
(<span class="hljs-name">label</span> t)

<span class="hljs-comment">; Returns the list of branches of the given tree</span>
(<span class="hljs-name">branches</span> t)

<span class="hljs-comment">; Returns #t if the given tree is a leaf, otherwise return #f</span>
(<span class="hljs-name">is-leaf</span> t)</code></pre>



<p>Implement <code>add-leaf</code>, a Scheme procedure that takes in a <code>tree</code> instance <code>t</code> and a number <code>x</code>.</p>

<p>This procedure will return a new tree where for each <strong>non-leaf</strong> node in the tree, append a new leaf with the label <code>x</code> to that node's branches.
If the input <code>tree</code> is a leaf, the resulting tree is unchanged.</p>

<p>Below is an example of a tree <code>t</code> and the result after <code>add-leaf</code> is applied to <code>t</code> with <code>x</code> as 5.</p>

<p><img class="img-responsive center-block" src="./Homework 7 Solutions _ CS 61A Summer 2024_files/add_leaf.png" alt="add" width="" height=""></p>

<blockquote><p><strong>Hints:</strong></p>

<ul>
  <li><code>append</code> will merge the elements in two Scheme lists together. For example, <code>(append (list 1 2) (list 3 4))</code> results in <code>(1 2 3 4)</code></li>
  <li><p><code>map</code> applies a procedure onto every item in a Scheme list. For example, <code>(map - (list 2 4))</code> results in <code>(-2 -4)</code></p>

  <ul>
    <li>You may find it useful to create a helper <code>lambda</code> function to pass in as the procedure to <code>map</code></li>
  </ul></li>
  <li>To create a tree with no branches, you <strong>must</strong> specify <code>nil</code> for its branches. For example, <code>(tree 5 nil)</code> is a leaf with <code>5</code>.</li>
</ul></blockquote>

<p xt-marked="ok">We've provided you with some starter code, but you do not have to follow the <xt-mark w="skeleton" style="color: #ff8861 !important">skeleton</xt-mark>.</p>

<blockquote><p>If you're having trouble debugging this problem, try drawing it out!</p></blockquote>

<solution>

<pre><code class="scheme hljs">(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">add-leaf</span> t x)
<div class="sol-highlight">    (<span class="hljs-name"><span class="hljs-keyword">if</span></span> (<span class="hljs-name">is-leaf</span> t)</div><div class="sol-highlight">        t</div>        (<span class="hljs-name"><span class="hljs-keyword">begin</span></span>
<div class="sol-highlight">            (<span class="hljs-name"><span class="hljs-keyword">define</span></span> mapped-branches (<span class="hljs-name">map</span> (<span class="hljs-name"><span class="hljs-keyword">lambda</span></span> (b) (<span class="hljs-name">add-leaf</span> b x)) (<span class="hljs-name">branches</span> t)))</div><div class="sol-highlight">            (<span class="hljs-name">tree</span> (<span class="hljs-name">label</span> t) (<span class="hljs-name">append</span> mapped-branches (<span class="hljs-name">list</span> (<span class="hljs-name">tree</span> x nil))))</div>        )
    )
)</code></pre>


</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q add-leaf</code><button id="copy-code-python3ok-qadd-leaf" class="inline-copy-button"><code class="nohighlight"><div class="copy-tooltip"><span>Copy</span></div>✂️</code></button></pre>
        <script>
        document.getElementById("copy-code-python3ok-qadd-leaf").onclick = () => copyCode('python3 ok -q add-leaf', "copy-code-python3ok-qadd-leaf");
        </script>
        <br>


<h2 id="exam-practice">Exam Practice</h2>

<p>The following are some SQL exam problems from previous semesters that you may find useful as additional exam practice.</p>

<ol>
  <li><a href="https://cs61a.org/exam/fa19/final/61a-fa19-final.pdf#page=11">Fall 2019 Final, Question 10: Big Game</a></li>
  <li><a href="https://cs61a.org/exam/su19/final/61a-su19-final.pdf#page=11">Summer 2019 Final, Question 8: The Big SQL</a></li>
  <li><a href="https://inst.eecs.berkeley.edu/~cs61a/fa18/assets/pdfs/61a-fa18-final.pdf#page=9">Fall 2018 Final, Question 7: SQL of Course</a></li>
</ol>

  </div>

  <div class="col-md-3 sticky">
    <nav class="hidden-print hidden-sm hidden-xs sidebar">
      <ul class="nav nav-stacked noselect">
  <li><a href="https://cs61a.org/hw/sol-hw07/#required-questions">Required Questions</a></li>
  <ul class="nav nav-stacked noselect">
    <li><a href="https://cs61a.org/hw/sol-hw07/#sql">SQL</a></li>
    <ul class="nav nav-stacked noselect">
      <li><a href="https://cs61a.org/hw/sol-hw07/#dog-data">Dog Data</a></li>
      <li><a href="https://cs61a.org/hw/sol-hw07/#q1-by-parent-height">Q1: By Parent Height</a></li>
      <li><a href="https://cs61a.org/hw/sol-hw07/#q2-size-of-dogs">Q2: Size of Dogs</a></li>
      <li><a href="https://cs61a.org/hw/sol-hw07/#q3-sentences">Q3: Sentences</a></li>
      <li><a href="https://cs61a.org/hw/sol-hw07/#q4-low-variance">Q4: Low Variance</a></li>
    </ul>
  </ul>
  <li><a href="https://cs61a.org/hw/sol-hw07/#submit-assignment">Submit Assignment</a></li>
  <ul class="nav nav-stacked noselect">
    <li><a href="https://cs61a.org/hw/sol-hw07/#extra-credit-1-pt">Extra Credit (1 pt)</a></li>
    <ul class="nav nav-stacked noselect">
      <li><a href="https://cs61a.org/hw/sol-hw07/#q5-add-leaf">Q5: Add Leaf</a></li>
    </ul>
    <li><a href="https://cs61a.org/hw/sol-hw07/#exam-practice">Exam Practice</a></li>
  </ul>
</ul>
    </nav>
  </div>
</div>

    </main>

    <!-- <footer class="container">
      <div class="row text-center">
        <div class="col col-sm-4">
          <h3><a href="/">CS 61A</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="/weekly">Weekly Schedule</a></li>
            <li><a href="/office-hours">Office Hours</a></li>
            <li><a href="/staff">Staff</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="/resources">Resources</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="/articles/studying">Studying Guide</a></li>
            <li><a href="/articles/debugging">Debugging Guide</a></li>
            <li><a href="/articles/composition">Composition Guide</a></li>
            <li><a href="/articles/pair-programming">Pair Programming</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="/articles/about">Policies</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="/articles/about#assignments">Assignments</a></li>
            <li><a href="/articles/about#exams">Exams</a></li>
            <li><a href="/articles/about#grading">Grading</a></li>
          </ul>
        </div>
      </div>
    </footer> -->

    

    <script src="./Homework 7 Solutions _ CS 61A Summer 2024_files/loader.min.js.下载"></script>
  <link rel="stylesheet" data-name="vs/editor/editor.main" href="./Homework 7 Solutions _ CS 61A Summer 2024_files/editor.main.min.css">
  <script>
      require.config({ paths: { 'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs' }});
      window.MonacoEnvironment = { getWorkerUrl: () => URL.createObjectURL(new Blob([`
      self.MonacoEnvironment = {
          baseUrl: 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min'
      };
      importScripts('https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/base/worker/workerMain.min.js');
  `], { type: 'text/javascript' }))
  };
  </script>
    <script src="./Homework 7 Solutions _ CS 61A Summer 2024_files/jsplumb.min.js.下载"></script>
    <script src="./Homework 7 Solutions _ CS 61A Summer 2024_files/network_storage.js.下载"></script>
    <script src="./Homework 7 Solutions _ CS 61A Summer 2024_files/storable.js.下载"></script>
    <script src="./Homework 7 Solutions _ CS 61A Summer 2024_files/editor.js.下载"></script>
    <script src="./Homework 7 Solutions _ CS 61A Summer 2024_files/copy-button.js.下载"></script>
    <script src="./Homework 7 Solutions _ CS 61A Summer 2024_files/env-diagram.js.下载"></script>
    
<!-- <script src="/assets/js/sketchy.js"></script> -->
<script>
  $('.sidebar ul').addClass('nav nav-stacked noselect');
  $('body').scrollspy({
    target: '.sidebar',
    offset: 40
  });

  function goToId(id) {
    var target = $(id);
    target.parent().show();
    $('html,body').animate({
      scrollTop: target.offset().top,
    }, 100);
    $("body").scrollspy('refresh');
  }

  if (location.hash) {
    setTimeout(function() {
      if (location.hash) {
        goToId(location.hash);
      }
    }, 1);
  }

  $("a").click(function(event) {
    var urlBeforeHashRegEx = new RegExp("^"+window.location.href.split("#")[0]);
    if (/^#/.test(this.hash) && urlBeforeHashRegEx.test(this.href)) {
      event.preventDefault();
      goToId(this.hash);
      document.location.hash = this.hash;
    }
  });
</script>

  
<deepl-input-controller><template shadowrootmode="open"><link rel="stylesheet" href="chrome-extension://fancfknaplihpclbhbpclnmmjcjanbaf/build/content.css"><div dir="ltr" style="visibility: initial !important;"><div class="dl-input-translation-container svelte-95aucy"><div></div></div></div></template></deepl-input-controller></body><link rel="stylesheet" asset="eduser.css" href="chrome-extension://mjdbhokoopacimoekfgkcoogikbfgngb/assets/eduser.css"></html>